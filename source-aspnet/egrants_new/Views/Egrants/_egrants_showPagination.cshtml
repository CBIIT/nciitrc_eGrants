<!--start egrants Pagination-->
<script language="JavaScript" type="text/javascript">
    function show_tab(act, tabid, totaltab) {
        if (act == 'next') {
            var tabid = tabid + 1;
        } else if (act == 'previous') {
            var tabid = tabid - 1;
        }
        else
        {
            var tabid = tabid;
        }

        for (var i = 1; i <= totaltab; i++) {
            var el = "tab_" + i;
            if (i != tabid) {
                if (document.getElementById(el).style.display == "inline") {
                    document.getElementById(el).style.display = "none";
                }
            } else document.getElementById(el).style.display = "inline";
        }
    }

    function view_page(page_num, tab_num) {
        var str = document.getElementById("hidSearchStr").value;
        var searchtype = document.getElementById("hidSearchType").value;

        //alert(searchtype);
        if (searchtype == "by_filters") {
            var packages = "by_filters";
            var FiscalYear=document.getElementById("hidFilterFY").value;
            var Mechanism=document.getElementById("hidFilterMechanism").value;
            var AdminCode=document.getElementById("hidFilterAdminCode").value;
            var SerialNumber=document.getElementById("hidFilterSerialNumber").value;     
            var url = "@Url.Action("by_filters_page", "Egrants")?tab_num=" + tab_num + "&page_num=" + page_num + "&package=" + packages + "&fy=" + FiscalYear + "&mechanism=" + Mechanism + "&admincode=" + AdminCode + "&serialnum=" + SerialNumber;    
        }
        else if (searchtype == "by_qc")
        {
            var url = "@Url.Action("by_page", "Egrants")?str=qc&tab_num=" + tab_num + "&page_num=" + page_num + "&mode=qc";
        } else var url = "@Url.Action("by_page", "Egrants")?str=" + str + "&tab_num=" + tab_num + "&page_num=" + page_num;

        //alert(url);
        window.document.location.href = url;
    }

    @*function view_page_by_filters(str, page_num, tab_num) {
        var fy=document.getElementById("hidGrantID").value;
        var filters = document.getElementById("hidPackage").value;
        var url = "@Url.Action("by_filters", "Egrants")?str=" + str + "&grant_id=" + fy + "&package" + filters + "&tab_num=" + tab_num + "&page_num=" + page_num;
        //alert(url)
        window.document.location.href = url;
    }*@
</script>

<div style="float:left;">
    @{
        var total_grants = 0;
        var total_tabs = 0;
        var total_pages = 0;
        var per_page = 0;

        if (ViewBag.Str == "qc")
        {
            per_page = 5;
        }
        else
        {
            per_page = 20;
        }

        foreach (var page in ViewBag.Pagination)
        {
            if (Convert.ToInt16(page.tag) == 1)
            {
                total_grants = Convert.ToInt32(page.total_grants);
                total_tabs = Convert.ToInt32(page.total_tabs);
                total_pages = Convert.ToInt32(page.total_pages);
            }
        }

        if (total_grants > 1)
        {
            <b>Found @total_grants.ToString("#,##0") grants.</b>
            if (total_pages > 1)
            {
                <b> Now viewing page No. @ViewBag.CurrentPage of total @total_pages.ToString("#,##0") pages (@per_page grants per page).</b>
            }
            <br />
        }else if (total_grants < 1)
        {
            <div><b>No data found for the search</b></div><br />
        }

        if (total_pages > 1)
        {
        <b>page:</b>
            <!--start tabs-->
            foreach (var tabs in ViewBag.Pagination)
            {
                if (Convert.ToInt16(tabs.tag) == 2 && Convert.ToInt16(tabs.tab_number) <= total_tabs)                     ////style="display:none"  Convert.ToInt16(tabs.tab_number) == tab_num &&&& Convert.ToInt16(tabs.tab_number) == Convert.ToInt16(tab_num)
                {               
                    <!--start pages-->
                    <div class="menu" id="tab_@tabs.tab_number" style="display:none">
                        @if (Convert.ToInt16(tabs.tab_number) > 1 && Convert.ToInt16(tabs.tab_number) <= Convert.ToInt16(total_tabs))
                        {
                            <a href="JavaScript:show_tab('previous', @tabs.tab_number, @total_tabs)" title="Go to previous tab">&lt;</a>
                        }

                        @foreach (var page in ViewBag.Pagination)
                        {
                            if (Convert.ToInt16(page.tag) == 3 && Convert.ToInt16(page.tab_number) == Convert.ToInt16(tabs.tab_number))
                            {
                                if (Convert.ToInt16(page.page_number) == Convert.ToInt16(ViewBag.CurrentPage))
                                {
                                    <b>&#91;<a href="JavaScript:view_page(@page.page_number, @tabs.tab_number)" title="Click it to show page by page number">@page.page_number</a>&#93;</b>
                                }
                                else
                                {
                                    <b><a href="JavaScript:view_page(@page.page_number, @tabs.tab_number)" title="Click it to show page by page number">@page.page_number</a></b>
                                }
                            }
                        }

                        @if (Convert.ToInt16(tabs.tab_number) < total_tabs)
                        {
                            <a href="JavaScript:show_tab('next', @tabs.tab_number, @total_tabs)" title="Go to next tab">&gt;</a>
                        }
                    </div>
                    <!--end pages-->
                }
            }
        <!--end tabs-->
        }
    }
</div>
<!--end start egrants Pagination-->